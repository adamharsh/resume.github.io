define("modules/clean/account_page/account_page",["require","exports","tslib","external/react","external/redux","external/react-redux","external/redux-thunk","external/mcl/tabbed_header","modules/core/browser","modules/core/i18n","modules/core/exception","modules/clean/react/maestro/header","modules/clean/react/maestro/layout","modules/clean/react/css","modules/clean/history","modules/clean/viewer","modules/clean/account_page/tabs/lib","modules/clean/account_page/reducer","modules/clean/account_page/sidebar_region","modules/clean/account_page/util"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,m,f,_,h,y,b,g){"use strict";function v(e){return"personal"===e.role?l._("Personal account"):_.get_viewer().team_name?l._("%(team_name)s account").format({team_name:_.get_viewer().team_name}):l._("Work account")}Object.defineProperty(t,"__esModule",{value:!0});var E=a.createStore(y.rootReducer,a.applyMiddleware(o)),S=(function(e){function t(){var t=e.call(this)||this;t.onTabSelected=function(e){t.setState({activeTab:e});var n=h.getTabFromId(e);n||u.assert(!1,e+" is not a valid tab"),f.push_state("/account/"+n.id)},t.getTabContent=function(){return h.getTabFromId(t.state.activeTab).view},t.getSideBarRegion=function(){if("billing"===t.state.activeTab)return r.createElement(b.SidebarRegion,null)};var n=g.getCurrentUser(),a=h.getTabFromUrlPath(c.get_uri().getPath()),i=a||h.getDefaultTab(n);return t.state={user:n,activeTab:i.id},t}return n.__extends(t,e),t.prototype.render=function(){var e=this;return r.createElement(p.MaestroChrome,{user:this.state.user,titleRegion:r.createElement(d.MaestroHeaderTitle,null,v(this.state.user)),embeddedAppRegion:r.createElement(i.Provider,{store:E},r.createElement("div",{className:"account-page"},r.createElement(s.TabbedHeader,{onSelection:this.onTabSelected},h.getTabs(this.state.user).map(function(t){return r.createElement(s.Tab,{key:t.id,active:e.state.activeTab===t.id,id:t.id},t.displayName)})),this.getTabContent())),actionSidebarRegion:this.getSideBarRegion()})},t})(r.Component);t.AccountPage=m(S,["/static/css/mcl/index-vfl3F-owF.css","/static/css/account/pagelet/index-vfl1m02Ne.css"])}),define("modules/clean/account_page/components/key_value_block",["require","exports","external/react","modules/clean/react/css","external/mcl/tertiary_link"],function(e,t,n,r,a){"use strict";function i(e){return n.createElement("div",{className:"account-key-value-block"},n.createElement("span",{className:"account-key-value-block__key"},e.keyText),n.createElement("span",{className:"account-key-value-block__value"},e.valueText),n.createElement(a.TertiaryLink,{className:"account-key-value-block__link",onClick:e.onLinkClick},e.linkText))}Object.defineProperty(t,"__esModule",{value:!0}),t.KeyValueBlock=r(i,["/static/css/account/pagelet/index-vfl1m02Ne.css"])}),define("modules/clean/account_page/reducer",["require","exports","external/redux","modules/clean/account_page/widgets/billing/reducers","modules/clean/account_page/widgets/email_notifications/reducers","modules/clean/account_page/widgets/plan/reducers","modules/clean/account_page/widgets/connected_services/reducers"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=n.combineReducers({billingInfo:r.billingInfoReducer,connectedServices:o.connectedServicesReducer,emailNotifications:a.emailNotificationsReducer,planTab:i.planTabReducer})}),define("modules/clean/account_page/sidebar_region",["require","exports","tslib","external/react","modules/clean/react/css"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"appactions-menu"},r.createElement("div",{className:"appactions-menu--buttons"},r.createElement("div",{className:"primary-action-menu"},r.createElement("span",{className:"primary-action-menu__header-text"}),r.createElement("div",{className:"primary-action-menu__button-wrapper"},r.createElement("button",{className:"primary-action-menu__button mc-button mc-button-primary"},r.createElement("span",{className:"mc-button-content ue-effect-container"},"Find receipt"))))))},t})(r.Component);t.SidebarRegion=a(i,["/static/css/dropbox/app_actions-vfloTQXJq.css"])}),define("modules/clean/account_page/tabs/billing",["require","exports","tslib","external/react","external/react-redux","modules/clean/react/css","modules/core/i18n","modules/clean/teams/admin/widgets/billing_history/billing_history_table","modules/clean/teams/admin/lib/billing_history","modules/clean/account_page/components/key_value_block","modules/clean/account_page/widgets/billing/action_creators","modules/constants/show_edit_invoice_modal"],function(e,t,n,r,a,i,o,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){return{billingInfo:e.billingInfo.billingInfo}},m=function(e){return{loadBillingInfo:function(){return e(u.loadDataIfNecessary())}}},f=(function(e){function t(t){var n=e.call(this,t)||this;return n.handlePaymentUpdate=n.handlePaymentUpdate.bind(n),n.handleBillingChange=n.handleBillingChange.bind(n),n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.loadBillingInfo()},t.prototype.handlePaymentUpdate=function(){},t.prototype.handleBillingChange=function(){},t.prototype.buildPaymentDescription=function(e,t){return null===t?e:o._("%(payment_description)s, exp: %(expiration_date)s").format({payment_description:e,expiration_date:t,comment:'Payment description is a card information, already translated           (ex> Visa ending in 2543). Date is in format MM / YYYY ( ex> 08 / 2017 ).           An example translated string is "Visa ending in 2543, exp: 08 / 2017 ).'})},t.prototype.buildBillingDescription=function(e){return null===e?"":o._("Plan billed %(period)s").format({period:e})},t.prototype.buildBillingHistoryIfNecessary=function(e,t){if(null!==e){var n=c.getHistoryData(e);return r.createElement("div",{className:"billing-table-container"},r.createElement(s.BillingHistoryTable,{billingHistoryRecords:n,amountLabel:o._("Amount"),displayNoTransactionsOnEmptyRecords:!1,showEditInvoiceModal:d.SHOW_EDIT_INVOICE_MODAL,footer:this.buildFooterIfNecessary(t)}))}},t.prototype.buildFooterIfNecessary=function(e){if(e)return r.createElement("tr",{className:"billing-history-row"},r.createElement("td",{colSpan:4,className:"billing-history-col"},r.createElement("a",{href:"/payments"},o._("View all billing history"))))},t.prototype.render=function(){var e=this.props.billingInfo,t=e.description,n=e.expiration_date,a=e.period,i=e.transactions,s=e.has_more;return r.createElement("div",{className:"account-page-tab"},r.createElement(l.KeyValueBlock,{keyText:o._("Payment method"),valueText:this.buildPaymentDescription(t,n),linkText:o._("Update"),onLinkClick:this.handlePaymentUpdate}),r.createElement(l.KeyValueBlock,{keyText:o._("Billing period"),valueText:this.buildBillingDescription(a),linkText:o._("Change"),onLinkClick:this.handleBillingChange}),r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},o._("Billing history")),r.createElement("p",{className:"account-page-block__subtext"},o._("View invoices and receipts for all payments made on your Dropbox account.")),this.buildBillingHistoryIfNecessary(i,s)))},t})(r.Component),_=a.connect(p,m)(f);t.BillingTab=i(_,["/static/css/account/pagelet/billing_tab-vfldj_oEY.css"])}),define("modules/clean/account_page/tabs/connected_apps",["require","exports","tslib","external/react","modules/clean/account_page/widgets/connected_services/view","modules/clean/account_page/widgets/linked_apps/view","modules/clean/account_page/widgets/mobile_contacts/view"],function(e,t,n,r,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-tab"},r.createElement(a.ConnectedServices,null),r.createElement(o.MobileContacts,null),r.createElement(i.LinkedApps,null))},t})(r.Component);t.ConnectedAppsTab=s}),define("modules/clean/account_page/tabs/lib",["require","exports","modules/clean/account_page/tabs/tab_definitions"],function(e,t,n){"use strict";function r(e){var t={};return s.forEach(function(e){t[e.id]=e}),t[e]}function a(e){var t=e.replace(/^\//,"").replace(/$\//,"").split("/");if(!(t.length<2)){var n=t[1],a=r(n);return a?a:void 0}}function i(e){return n.GENERAL}function o(e){return s.filter(function(t){return!t.skipIf||!t.skipIf(e)})}Object.defineProperty(t,"__esModule",{value:!0});var s=[n.GENERAL,n.PLAN,n.BILLING,n.SECURITY,n.NOTIFICATIONS,n.CONNECTED_APPS];t.getTabFromId=r,t.getTabFromUrlPath=a,t.getDefaultTab=i,t.getTabs=o}),define("modules/clean/account_page/tabs/notifications",["require","exports","tslib","external/react","modules/clean/account_page/widgets/email_notifications/view"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement("h1",null,"Notifications Tab"),r.createElement(a.EmailNotifications,null))},t})(r.Component);t.NotificationsTab=i}),define("modules/clean/account_page/tabs/plan",["require","exports","tslib","external/react","modules/clean/account_page/widgets/plan/views/plan_container"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement(a.PlanContainer,null)},t})(r.Component);t.PlanTab=i}),define("modules/clean/account_page/tabs/security",["require","exports","tslib","external/react","modules/clean/account_page/widgets/security_upsell/view"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement(a.SecurityUpsellBanner,null))},t})(r.Component);t.SecurityTab=i}),define("modules/clean/account_page/tabs/tab_definitions",["require","exports","external/react","modules/core/i18n","modules/clean/account_page/tabs/billing","modules/clean/account_page/tabs/connected_apps","modules/clean/account_page/tabs/notifications","modules/clean/account_page/tabs/security","modules/clean/account_page/tabs/plan"],function(e,t,n,r,a,i,o,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GENERAL={id:"general",displayName:r._("General"),view:n.createElement("div",null,"General")},t.PLAN={id:"plan",displayName:r._("Plan"),view:n.createElement(c.PlanTab,null)},t.BILLING={id:"billing",displayName:r._("Billing"),view:n.createElement(a.BillingTab,null),skipIf:function(e){return!e.paid}},t.SECURITY={id:"security",displayName:r._("Security"),view:n.createElement(s.SecurityTab,null)},t.NOTIFICATIONS={id:"notifications",displayName:r._("Notifications"),view:n.createElement(o.NotificationsTab,null)},t.CONNECTED_APPS={id:"connected_apps",displayName:r._("Connected Apps"),view:n.createElement(i.ConnectedAppsTab,null)}}),define("modules/clean/account_page/util",["require","exports","modules/clean/viewer"],function(e,t,n){"use strict";function r(){return n.get_viewer().get_user_by_id(window.ensemble.viewer.getActiveUser().userId)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUser=r}),define("modules/clean/account_page/widgets/billing/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/billing/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(){var e=this;return function(t,i){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==i().billingInfo.loadingState?[3,2]:(t({type:"billing_info_load"}),[4,r.getBillingInfo(a.getCurrentUser().id)]);case 1:return e=n.sent(),t({type:"billing_info_loaded",billingInfo:e}),[2,!0];case 2:return[2,!1]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i}),define("modules/clean/account_page/widgets/billing/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/account/ajax_billing_tab_model",subject_user:e,dataType:"json"})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getBillingInfo=a}),define("modules/clean/account_page/widgets/billing/reducers",["require","exports","external/redux","modules/clean/account_page/widgets/billing/types"],function(e,t,n,r){"use strict";function a(e,t){return void 0===e&&(e="never_loaded"),"billing_info_load"===t.type?"loading":"billing_info_loaded"===t.type?"ready":e}function i(e,t){return void 0===e&&(e=r.DefaultBillingInfo),"billing_info_loaded"===t.type?t.billingInfo:e}Object.defineProperty(t,"__esModule",{value:!0}),t.billingInfoReducer=n.combineReducers({billingInfo:i,loadingState:a})}),define("modules/clean/account_page/widgets/billing/types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBillingInfo={description:"",expiration_date:"",period:"",has_more:!1,transactions:[]}}),define("modules/clean/account_page/widgets/connected_services/action_creators",["require","exports","tslib","modules/clean/account_page/util","modules/clean/profile_services/profile_services_link","modules/clean/profile_services/profile_services_constants","modules/core/exception","modules/clean/account_page/widgets/connected_services/api"],function(e,t,n,r,a,i,o,s){"use strict";function c(){var e=this;return function(t,a){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==a().connectedServices.loadingState?[3,2]:(t({type:"connected_services_load_services"}),[4,s.getThirdPartyProfileServices(r.getCurrentUser().id)]);case 1:e=n.sent(),t({type:"connected_services_services_loaded",services:e}),n.label=2;case 2:return[2]}})})}}function l(e,t){var r=this;return function(s){return n.__awaiter(r,void 0,void 0,function(){var r,c;return n.__generator(this,function(n){switch(n.label){case 0:return t===i.FACEBOOK?(o.assert(!1,"facebook linking has been deprecated"),[2,null]):(r=new a.ProfileServicesLinkingHandler,[4,r.auth_service_with_user_promise(t,e.id)]);case 1:return c=n.sent(),c.success&&s({type:"connected_services_service_connected",name:c.provider,displayName:c.profile.email}),[2,c]}})})}}function u(e,t){var r=this;return function(a,i){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(n){switch(n.label){case 0:return[4,s.unlinkUserFromService(e.id,t)];case 1:return n.sent(),a({type:"connected_services_service_disconnected",name:t}),[2,!0]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=c,t.authUserWithService=l,t.deauthUserWithService=u}),define("modules/clean/account_page/widgets/connected_services/api",["require","exports","tslib","modules/clean/profile_services/profile_services_constants","modules/clean/ajax_as_promised"],function(e,t,n,r,a){"use strict";function i(e){return e===r.IS_CONNECTED?"connected":e===r.WAS_CONNECTED?"was_connected":"never_connected"}function o(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]={connectionStatus:i(r.connection_status),displayName:r.display_name}}return t}function s(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,a.WebRequest({url:"/profile_services/thirdparty_profile_services",subject_user:e,dataType:"json"}).then(o)]})})}function c(e,t,r){return void 0===r&&(r=null),n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,a.WebRequest({url:"/profile_services/unlink",subject_user:e,data:{service:t,sourceId:r}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getThirdPartyProfileServices=s,t.unlinkUserFromService=c}),define("modules/clean/account_page/widgets/connected_services/reducers",["require","exports","tslib","external/redux"],function(e,t,n,r){"use strict";function a(e,t){if(void 0===e&&(e={}),"connected_services_services_loaded"===t.type)return t.services;if("connected_services_service_connected"===t.type){var r=n.__assign({},e);return r[t.name]={connectionStatus:"connected",displayName:t.displayName},r}if("connected_services_service_disconnected"===t.type){var r=n.__assign({},e);return delete r[t.name],r}return e}function i(e,t){return void 0===e&&(e="never_loaded"),"connected_services_load_services"===t.type?"loading":"connected_services_services_loaded"===t.type?"ready":e}Object.defineProperty(t,"__esModule",{value:!0}),t.servicesLoaded=a,t.connectedServicesReducer=r.combineReducers({services:a,loadingState:i})}),define("modules/clean/account_page/widgets/connected_services/view",["require","exports","tslib","external/react","external/react-redux","external/mcl/tertiary_link","modules/core/notify","modules/clean/account_page/widgets/connected_services/action_creators","modules/clean/profile_services/profile_services_constants","modules/clean/account_page/util","modules/constants/account_page","modules/clean/profile_services/profile_services_link","modules/core/i18n"],function(e,t,n,r,a,i,o,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){return{services:e.connectedServices.services}},f=function(e){return{fetchServices:function(){return e(s.loadDataIfNecessary())},connectService:function(t,n){return e(s.authUserWithService(t,n))},disconnectService:function(t,n){return e(s.deauthUserWithService(t,n))}}},_=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.fetchServices()},t.prototype.connectService=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.props.connectService(e,t)];case 1:return r=n.sent(),null!=r&&d.ProfileServicesLinkingHandler.show_import_notifications(r),[2]}})})},t.prototype.disconnectService=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.props.disconnectService(e,t)];case 1:return r=n.sent(),r&&o.success(p._("Successfully disconnected %(service)s.").format({service:c.to_name(t)})),[2]}})})},t.prototype.renderServiceRow=function(e,t){void 0===t&&(t=!1);var n,a=this.props.services[e],o=c.to_name(e),s=!1;null==a||"never_connected"===a.connectionStatus?n=p._("Connect your %(service_name)s account").format({service_name:o}):"connected"===a.connectionStatus?(n=p._("Disconnect"),s=!0):n=p._("Reconnect your %(service_name)s account").format({service_name:o});var u;return u=s?this.disconnectService.bind(this,l.getCurrentUser(),e):this.connectService.bind(this,l.getCurrentUser(),e),!(!s&&t)&&r.createElement("div",{"data-service":e,className:"connected-services__row"},r.createElement("span",{className:"connected-services__service"},o),r.createElement("div",{className:"connected-services__info-block"},s&&a.displayName&&r.createElement("span",{className:"connected-services__display-name"},s&&a&&a.displayName),r.createElement("span",null,r.createElement(i.TertiaryLink,{className:"connected-services__action-button",onClick:u},n))))},t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Connected Services"),r.createElement("p",{className:"account-page-block__subtext"},p._("Dropbox works best when you collaborate with people you know. Connecting these services\n          gives Dropbox info\n          including your name, your profile picture, and who you know to help you find friends and\n          work together.")),r.createElement("div",{className:"connected-services"},this.renderServiceRow(c.GOOGLE),this.renderServiceRow(c.YAHOO),this.renderServiceRow(c.FACEBOOK,!0),u.PROFILE_SERVICES_OUTLOOK[l.getCurrentUser().id]&&this.renderServiceRow(c.OUTLOOK)))},t})(r.Component);t.ConnectedServicesComponent=_,t.ConnectedServices=a.connect(m,f)(_)}),define("modules/clean/account_page/widgets/email_notifications/action_creators",["require","exports"],function(e,t){"use strict";function n(e){return{type:"email_notifications_change_name",name:e}}function r(){return{type:"email_notifications_increment_counter"}}Object.defineProperty(t,"__esModule",{value:!0}),t.saveName=n,t.incrementCounter=r}),define("modules/clean/account_page/widgets/email_notifications/reducers",["require","exports","external/redux"],function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e="initial"),"email_notifications_change_name"===t.type?t.name:e}function a(e,t){return void 0===e&&(e=0),"email_notifications_increment_counter"===t.type?e+1:e}Object.defineProperty(t,"__esModule",{value:!0}),t.emailNotificationsReducer=n.combineReducers({name:r,counter:a})}),define("modules/clean/account_page/widgets/email_notifications/view",["require","exports","tslib","external/react","external/react-redux","modules/clean/account_page/widgets/email_notifications/action_creators"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return{name:e.emailNotifications.name,count:e.emailNotifications.counter}},s=function(e){return{changeName:function(t){return e(i.saveName(t))},incrementCounter:function(){return e(i.incrementCounter())}}},c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleUpdateName=function(e){t.props.changeName(e.currentTarget.value)},t.handleIncrementCounter=function(){t.props.incrementCounter()},t}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement("label",{htmlFor:"name"},"Name"),r.createElement("input",{id:"name",type:"text",value:this.props.name,onChange:this.handleUpdateName}),r.createElement("hr",null),r.createElement("button",{onClick:this.handleIncrementCounter},"Increment"),"Value: ",this.props.count)},t})(r.Component);t.EmailNotificationsComponent=c,t.EmailNotifications=a.connect(o,s)(c)}),define("modules/clean/account_page/widgets/linked_apps/view",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Linked Apps"),r.createElement("p",{className:"account-page-block__subtext"},"You've given these apps access to your personal Dropbox account."))},t})(r.Component);t.LinkedApps=a}),define("modules/clean/account_page/widgets/mobile_contacts/view",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",{className:"account-page-block"},r.createElement("span",{className:"account-page-block__heading"},"Mobile Contacts"),r.createElement("p",{className:"account-page-block__subtext"},"You've imported contacts from the following mobile devices. ",r.createElement("a",null,"Learn more")))},t})(r.Component);t.MobileContacts=a}),define("modules/clean/account_page/widgets/plan/action_creators",["require","exports","tslib","modules/clean/account_page/widgets/plan/api","modules/clean/account_page/util"],function(e,t,n,r,a){"use strict";function i(){var e=this;return function(t,i){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return"never_loaded"!==i().planTab.loadingState?[3,2]:(t({type:"plan_tab_load_info"}),[4,r.getPlanInfo(a.getCurrentUser().id)]);case 1:return e=n.sent(),t({type:"plan_tab_info_loaded",planInfo:e}),[2,!0];case 2:return[2,!1]}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadDataIfNecessary=i}),define("modules/clean/account_page/widgets/plan/api",["require","exports","tslib","modules/clean/ajax_as_promised"],function(e,t,n,r){"use strict";function a(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return[2,r.WebRequest({url:"/account/ajax_plan_tab_model",subject_user:e,dataType:"json"})]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlanInfo=a}),define("modules/clean/account_page/widgets/plan/reducers",["require","exports","external/redux"],function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=i),"plan_tab_info_loaded"===t.type?t.planInfo:e}function a(e,t){return void 0===e&&(e="never_loaded"),"plan_tab_load_info"===t.type?"loading":"plan_tab_info_loaded"===t.type?"ready":e}Object.defineProperty(t,"__esModule",{value:!0});var i={serializedSubStatus:null};t.planTabReducer=n.combineReducers({planInfo:r,loadingState:a})}),define("modules/clean/account_page/widgets/plan/views/plan_container",["require","exports","tslib","external/react","external/react-redux","modules/clean/account_page/widgets/plan/action_creators","modules/clean/payments/skus/subscription_status","modules/clean/account_page/widgets/plan/views/plan_status","modules/clean/account_page/widgets/plan/views/quota_usage","modules/clean/account_page/widgets/plan/views/referral_space"],function(e,t,n,r,a,i,o,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){return{planInfo:e.planTab.planInfo,loadingState:e.planTab.loadingState}},d=function(e){return{loadPlanInfo:function(){return e(i.loadDataIfNecessary())}}},p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.loadPlanInfo()},t.prototype.isLoading=function(){return"ready"!==this.props.loadingState},t.prototype.render=function(){var e=this.props.planInfo.serializedSubStatus,t=void 0;return e&&(t=o.SubscriptionStatus.deserialize(e)),this.isLoading()||void 0===t?r.createElement("div",null,"loading..."):r.createElement("div",null,r.createElement("h1",null,"Plan Container"),r.createElement("p",null,t.subState.billingSchedule.id),r.createElement(s.PlanStatus,null),r.createElement(c.QuotaUsage,null),r.createElement(l.ReferralSpace,null))},t})(r.Component);t.PlanContainerComponent=p,t.PlanContainer=a.connect(u,d)(p)}),define("modules/clean/account_page/widgets/plan/views/plan_status",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement("h1",null,"PlanStatus"))},t})(r.Component);t.PlanStatus=a}),define("modules/clean/account_page/widgets/plan/views/quota_usage",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement("h1",null,"QuotaUsage"))},t})(r.Component);t.QuotaUsage=a}),define("modules/clean/account_page/widgets/plan/views/referral_space",["require","exports","tslib","external/react"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement("div",null,r.createElement("h1",null,"ReferralSpace"))},t})(r.Component);t.ReferralSpace=a}),define("modules/clean/account_page/widgets/security_upsell/view",["require","exports","tslib","modules/clean/react/css","external/react","modules/clean/react/image","modules/core/i18n","modules/clean/static_urls","modules/constants/python"],function(e,t,n,r,a,i,o,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){var t=e.call(this)||this;return t.handleExpand=function(){t.setState({expanded:!t.state.expanded})},t.handleX=function(){t.setState({hidden:!t.state.hidden})},t.state={expanded:!1,hidden:!1},t}return n.__extends(t,e),t.prototype.renderExpandButton=function(e){var t;return t=e?"up-arrow":"down-arrow",a.createElement("div",{className:"expand-button-container"},a.createElement("button",{className:"expand-button",onClick:this.handleExpand},o._("Additional %(trademark_plus)s security features").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("button",{className:t,onClick:this.handleExpand}))},t.prototype.renderX=function(){return a.createElement("div",{className:"X-button-image"},a.createElement("button",{className:"X-button",onClick:this.handleX}))},t.prototype.renderAdditionalFeatures=function(){return a.createElement("div",null,a.createElement("hr",{className:"divider security-upsell-container__divider"}),a.createElement("div",{className:"security-upsell-container__additional-features"},a.createElement("table",null,a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Version history and file recovery")),a.createElement("td",null,o._("View-only permissions"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Easily recover deleted files and restore previous file versions.")),a.createElement("td",null,o._("Some copy is needed here for this feature"))),a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Password-protected and expiring shared links")),a.createElement("td",null,o._("Remove device wipe"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Password-protect your links or set expiration dates to grant temporary access.")),a.createElement("td",null,o._("Clear files from lost or stolen devices to keep company data in the right hands."))),a.createElement("tr",{className:"feature-name"},a.createElement("td",null,o._("Require two-factor authentication (2FA)"))),a.createElement("tr",{className:"feature-description"},a.createElement("td",null,o._("Require six-digit security code or key in addition to a password to access your account."))))))},t.prototype.render=function(){var e;return this.state.expanded&&(e=this.renderAdditionalFeatures()),this.state.hidden?a.createElement("noscript",null):a.createElement("div",{className:"security-upsell-container"},this.renderX(),a.createElement("div",{className:"security-upsell-container__content"},a.createElement("div",null,a.createElement("h1",null,o._("More Security Controls With %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("h2",null,o._("Get access to extra security features when you upgrade to %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),a.createElement("a",{href:"/buy",className:"mc-button mc-button-large mc-button-primary security-upsell-button"},o._("Upgrade to %(trademark_plus)s").format({trademark_plus:c.TRADEMARK_PLUS})),this.renderExpandButton(this.state.expanded)),a.createElement(i,{className:"security-upsell-container__content__illo",alt:o._("Image of a safe"),src:s.static_url("/static/images/growth/experiments/security_upsell/Extra-controls@2x-vflPi86nK.svg"),srcHiRes:s.static_url("/static/images/growth/experiments/security_upsell/Extra-controls@2x-vflPi86nK.svg")})),e)},t})(a.Component)
;t.SecurityUpsellBanner=r(l,["/static/css/account/security_tab-vflrjskJ7.css","/static/css/mcl/button-vflFHw3Rq.css"])}),define("modules/clean/payments/cash",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){}return e.set_locale_number_format=function(t,n,r){void 0===t&&(t=","),void 0===n&&(n="."),void 0===r&&(r="-"),e.groupSymbol=t,e.decimalSymbol=n,e.minusSignSymbol=r},e.set_currency_format_map=function(t){e.currencyFormatMap=t},e.update_currency_format_map=function(t,n){e.currencyFormatMap[t]=n},e.formatAmountThousandsHelper=function(t){var n=Math.abs(parseInt(t,10)).toFixed(0).toString();if(n.length<=3)return n;var r=n.substr(0,n.length-3);return e.formatAmountThousandsHelper(r)+e.groupSymbol+n.substr(n.length-3)},e.roundCurrency=function(t,n,r){return void 0===n&&(n="USD"),void 0===r&&(r=2),r=t%1===0?0:r,e.formatCurrency(t,n,r)},e.formatCurrency=function(t,n,r){void 0===n&&(n="USD"),void 0===r&&(r=2);var a=parseFloat(t);"JPY"===n&&(r=0);var i=e.formatNumber(a,r);return e.currencyFormatMap[n]?e.currencyFormatMap[n].replace("%v",i):i+" "+n},e.splitFormatCurrency=function(t,n,r){void 0===n&&(n="USD"),void 0===r&&(r=2);var a=e.formatCurrency(t,n,r),i=a.indexOf(e.decimalSymbol);return i===-1?[a,""]:[a.slice(0,i+1),a.slice(i+1)]},e.formatNumber=function(t,n){void 0===n&&(n=2);var r=t<0?e.minusSignSymbol:"",a="";return n>0&&(a=e.decimalSymbol+t.toFixed(n).split(".")[1]),r+e.formatAmountThousandsHelper(t)+a},e.removeFormatting=function(t,n){var r=e.currencyFormatMap[n],a=r.replace("%v","");return t.replace(a,"").replace(e.groupSymbol,"")},e})();r.groupSymbol=",",r.decimalSymbol=".",r.minusSignSymbol="-",r.currencyFormatMap={USD:"$%v"},t.CashUtil=r;var a=(function(){function e(e,t){this.cash1=e,this.cash2=t}return e})();t.CashCurrenciesDoNotMatch=a;var i=(function(){function e(){}return e})();t.CashNeedsAmountAndCurrency=i;var o=(function(){function e(e,t){this.currency=t;var n=parseFloat(""+e);if(isNaN(n)||!this.currency)throw new i;var r=Math.pow(10,2);this.amount=Math.round(n*r)/r}return e.fromObject=function(t){return new e(parseFloat(t.amount),t.currency)},e.fromString=function(t,n){return new e(r.removeFormatting(t,n),n)},e.prototype.add=function(t){if(this.currency!==t.currency)throw new a(this,t);return new e(this.amount+t.amount,this.currency)},e.prototype.subtract=function(t){return this.add(new e(-t.amount,t.currency))},e.prototype.multiply=function(t){return new e(this.amount*t,this.currency)},e.prototype.divide=function(t){return new e(this.amount/t,this.currency)},e.prototype.round=function(t){void 0===t&&(t=2);var n=Math.pow(10,t);return new e(Math.round(this.amount*n)/n,this.currency)},e.prototype.toString=function(e){return void 0===e&&(e=2),"JPY"===this.currency&&(e=0),r.roundCurrency(this.amount,this.currency,e)},e.prototype.formatCurrency=function(e){return void 0===e&&(e=2),r.formatCurrency(this.amount,this.currency,e)},e.formatWithTaxLabels=function(e,t){return t.doesTaxApply?n._("%(price)s (taxes included)").format({price:e.formatCurrency()}):e.formatCurrency()},e})();t.Cash=o}),define("modules/clean/payments/skus/billing_schedule",["require","exports","modules/core/i18n","modules/clean/payments/skus/constants"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){var n=new e;return n.serializedBillingSchedule=t,n},Object.defineProperty(e.prototype,"id",{get:function(){return this.serializedBillingSchedule.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.serializedBillingSchedule.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleDescriptionAdjective",{get:function(){switch(this.id){case r.ScheduleId.MONTHLY:return n._("monthly");case r.ScheduleId.YEARLY:return n._("yearly");default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unlocalizedName",{get:function(){return this.serializedBillingSchedule.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){switch(this.serializedBillingSchedule.id){case r.ScheduleId.MONTHLY:return n._("monthly");case r.ScheduleId.YEARLY:return n._("yearly")}return""},enumerable:!0,configurable:!0}),e})();t.BillingSchedule=a}),define("modules/clean/payments/skus/billing_summary",["require","exports","modules/core/i18n","modules/clean/payments/skus/billing_summary_line_item","modules/clean/payments/skus/constants","modules/clean/payments/cash"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(){}return e.deserialize=function(t){var n=new e;return t?(n._lineItems=t.lineItems.map(function(e){return r.BillingSummaryLineItem.deserialize(e)}),n.baseAmount=i.Cash.fromObject(t.baseAmount),n.discountAmount=i.Cash.fromObject(t.discountAmount),n._discountPercentage=t.discountPercentage,n._doesTaxApply=t.doesTaxApply,n.taxAmount=i.Cash.fromObject(t.taxAmount),n.totalAmount=i.Cash.fromObject(t.totalAmount),n._taxRate=t.taxRate,n._taxName=t.taxName,n):n},Object.defineProperty(e.prototype,"lineItems",{get:function(){return this._lineItems.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"base",{get:function(){return this.baseAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discount",{get:function(){return this.discountAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"discountPercentage",{get:function(){return this._discountPercentage},enumerable:!0,configurable:!0}),e.prototype.getPerLicenseCost=function(e){for(var t=0,n=this.lineItems;t<n.length;t++){var r=n[t];if(r.sku.code===e){var a=r.price.amount/r.quantity,o=1-this.discountPercentage/100;return new i.Cash(a*o,r.price.currency)}}},Object.defineProperty(e.prototype,"tax",{get:function(){return this.taxAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taxRate",{get:function(){return this._taxRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taxName",{get:function(){return this._taxName},enumerable:!0,configurable:!0}),e.prototype.taxString=function(){return this.taxRate<=0?"":n._("(including %(tax_rate_str)s tax)").format({tax_rate_str:n.format_percent(this.taxRate)})},Object.defineProperty(e.prototype,"total",{get:function(){return this.totalAmount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalLicenses",{get:function(){return this._lineItems.reduce(function(e,t){return t.sku.productClass===a.ProductClass.LICENSE&&(e+=t.quantity),e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doesTaxApply",{get:function(){return this._doesTaxApply},enumerable:!0,configurable:!0}),e})();t.BillingSummary=o}),define("modules/clean/payments/skus/billing_summary_line_item",["require","exports","modules/clean/payments/skus/catalog_sku","modules/clean/payments/cash"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){var a=new e;return a._sku=n.CatalogSku.deserialize(t.sku),a._quantity=t.quantity,a._price=r.Cash.fromObject(t.price),t.lineItemPrice?a._displayPrice=r.Cash.fromObject(t.lineItemPrice):a._displayPrice=r.Cash.fromObject(t.price),a},Object.defineProperty(e.prototype,"sku",{get:function(){return this._sku},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quantity",{get:function(){return this._quantity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayPrice",{get:function(){return this._displayPrice},enumerable:!0,configurable:!0}),e})();t.BillingSummaryLineItem=a}),define("modules/clean/payments/skus/catalog_sku",["require","exports","modules/core/i18n","modules/clean/payments/skus/billing_schedule","modules/clean/payments/cash","modules/clean/display_format","modules/clean/payments/skus/constants","modules/constants/python"],function(e,t,n,r,a,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(){function e(e){this.serializedSku=e,this.billingSchedule=r.BillingSchedule.deserialize(e.billingSchedule)}return e.deserialize=function(t){return new e(t)},e.prototype.displayName=function(e){if(void 0===e&&(e=!1),e)return this.displayUntranslatableNameDirectFromSku;if(this.productClass===o.ProductClass.PLAN)switch(this.productType){case o.ProductPlanType.STANDARD:return n._("Prior %(trademark_business)s").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.TRIAL:return n._("Prior %(trademark_business)s trial").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.NEW_STANDARD:return n._("Standard");case o.ProductPlanType.STANDARD_TRIAL:return n._("Standard trial");case o.ProductPlanType.ADVANCED:return n._("Advanced");case o.ProductPlanType.ADVANCED_TRIAL:return n._("Advanced trial");case o.ProductPlanType.SERVER:return n._("Advanced Server Integration");case o.ProductPlanType.SERVER_TRIAL:return n._("Advanced Server Integration trial");default:return n._("Current Plan")}return this.productClass===o.ProductClass.LICENSE?n._("License(s)"):this.productClass===o.ProductClass.ADDON&&this.productType===o.ProductAddonType.QUOTA?n._("%(quota)s space").format({quota:this.formattedSpecQuotaGb}):""},e.prototype.displaySpace=function(){return this.productClass===o.ProductClass.PLAN?this.productType===o.ProductPlanType.STANDARD||this.productType===o.ProductPlanType.TRIAL||this.productType===o.ProductPlanType.ADVANCED||this.productType===o.ProductPlanType.ADVANCED_TRIAL?n._("As much space as you need"):n._("%(space_quota)s of space").format({space_quota:this.longFormSpecQuotaGb}):""},e.prototype.descriptionName=function(){if(this.productClass===o.ProductClass.LICENSE)switch(this.productType){case o.ProductPlanType.STANDARD:return n._("Prior %(trademark_business)s").format({trademark_business:s.TRADEMARK_BUSINESS});case o.ProductPlanType.NEW_STANDARD:switch(this.billingSchedule.id){case o.ScheduleId.MONTHLY:return n._("Standard, billed monthly");case o.ScheduleId.YEARLY:return n._("Standard, billed yearly");default:return n._("Standard")}case o.ProductPlanType.ADVANCED:switch(this.billingSchedule.id){case o.ScheduleId.MONTHLY:return n._("Advanced, billed monthly");case o.ScheduleId.YEARLY:return n._("Advanced, billed yearly");default:return n._("Advanced")}default:return n._("Current Plan")}return this.productClass===o.ProductClass.ADDON&&this.productType===o.ProductAddonType.QUOTA?n._("Addl. space"):""},Object.defineProperty(e.prototype,"code",{get:function(){return this.serializedSku.code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayUntranslatableNameDirectFromSku",{get:function(){return this.serializedSku.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclusionGroup",{get:function(){return this.serializedSku.exclusionGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productFamily",{get:function(){return this.serializedSku.productFamily},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxId",{get:function(){return this.serializedSku.adminCxId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productClass",{get:function(){return this.serializedSku.productClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productType",{get:function(){return this.serializedSku.productType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productSpec",{get:function(){return this.serializedSku.productSpec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schedule",{get:function(){return this.serializedSku.schedule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleId",{get:function(){return this.serializedSku.billingSchedule.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleName",{get:function(){return this.serializedSku.billingSchedule.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduleDescription",{get:function(){return this.serializedSku.billingSchedule.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCost",{get:function(){return a.Cash.fromObject(this.serializedSku.price.displayCost)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCostIsTaxInclusive",{get:function(){return this.serializedSku.price.isTaxInclusive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specQuotaGb",{get:function(){return this.serializedSku.specQuotaGb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedSpecQuotaGb",{get:function(){if(this.specQuotaGb)return i.formatGigabytes(this.specQuotaGb)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longFormSpecQuotaGb",{get:function(){if(this.specQuotaGb)return"%(formatted_quota)s (%(space_quota)s GB)".format({formatted_quota:this.formattedSpecQuotaGb,space_quota:this.specQuotaGb})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxName",{get:function(){return this.serializedSku.adminCxName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTrialPlan",{get:function(){return this.productType===o.ProductPlanType.TRIAL||this.productType===o.ProductPlanType.STANDARD_TRIAL||this.productType===o.ProductPlanType.ADVANCED_TRIAL||this.productType===o.ProductPlanType.SERVER_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLegacyPlan",{get:function(){return!this.isStandardPlan&&!this.isAdvancePlan&&!this.isServerPlan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStandardPlan",{get:function(){return this.productType===o.ProductPlanType.NEW_STANDARD||this.productType===o.ProductPlanType.STANDARD_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAdvancePlan",{get:function(){return this.productType===o.ProductPlanType.ADVANCED||this.productType===o.ProductPlanType.ADVANCED_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isServerPlan",{get:function(){return this.productType===o.ProductPlanType.SERVER||this.productType===o.ProductPlanType.SERVER_TRIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxDescription",{get:function(){if(this.productClass===o.ProductClass.PLAN)return this.adminCxName;if(this.productClass===o.ProductClass.ADDON)switch(this.productSpec){case o.ProductSpec.SPACE_PACK_100G:return"100GB Team Space Extra";case o.ProductSpec.SPACE_PACK_10T:return"10TB Team Space Extra";case o.ProductSpec.SPACE_PACK_50T:return"50TB Team Space Extra";case o.ProductSpec.SPACE_PACK_200T:return"200TB Team Space Extra";case o.ProductSpec.SPACE_PACK_500T:return"500TB Team Space Extra";case o.ProductSpec.SPACE_PACK_1000T:return"1000TB Team Space Extra";case o.ProductSpec.SPACE_PACK_5000T:return"5000TB Team Space Extra"}return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsValid",{get:function(){return this.productClass===o.ProductClass.PLAN&&(this.billingSchedule.id!==o.ScheduleId.FIVE_YEARS&&(this.productFamily!==o.ProductFamily.ENTERPRISE||this.billingSchedule.id!==o.ScheduleId.MONTHLY))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsUnlimited",{get:function(){if(this.productClass!==o.ProductClass.PLAN)return!1;if(this.productFamily===o.ProductFamily.TEAM)switch(this.productType){case o.ProductPlanType.NEW_STANDARD:case o.ProductPlanType.STANDARD_TRIAL:case o.ProductPlanType.SERVER:case o.ProductPlanType.SERVER_TRIAL:return!1}else{if(this.productFamily===o.ProductFamily.ENTERPRISE&&this.productType===o.ProductPlanType.SERVER)return!1;if(this.productFamily===o.ProductFamily.EDUCATION)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adminCxIsSpacePackEligible",{get:function(){return this.productClass===o.ProductClass.PLAN&&!(this.adminCxIsUnlimited||this.productFamily===o.ProductFamily.TEAM&&this.productType===o.ProductPlanType.NEW_STANDARD)},enumerable:!0,configurable:!0}),e})();t.CatalogSku=c}),define("modules/clean/payments/skus/catalog_sku_set",["require","exports","modules/clean/payments/skus/catalog_sku","modules/clean/payments/skus/constants"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e){this._skus=e}return e.fromSerializedSkus=function(t){return new e(t.map(function(e){return new n.CatalogSku(e)}))},Object.defineProperty(e.prototype,"sku",{get:function(){if(1!==this._skus.length)throw new Error("Unable to resolve to a single SKU");return this._skus[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skus",{get:function(){return this._skus.slice()},enumerable:!0,configurable:!0}),e.prototype.filter=function(t){return new e(this._skus.filter(t))},e.prototype.withAdminCxId=function(e){return this.filter(function(t){return t.adminCxId===e})},e.prototype.withCode=function(e){return this.filter(function(t){return t.code===e})},e.prototype.withFamily=function(e){return this.filter(function(t){return t.productFamily===e})},e.prototype.withClass=function(e){return this.filter(function(t){return t.productClass===e})},e.prototype.withType=function(e){return this.filter(function(t){return t.productType===e})},e.prototype.withSchedule=function(e){return this.filter(function(t){return t.schedule===e})},e.prototype.monthly=function(){return this.withSchedule(r.ProductSchedule.MONTHLY)},e.prototype.yearly=function(){return this.withSchedule(r.ProductSchedule.YEARLY)},e.prototype.peekSkus=function(){if(this._skus.length>0)return this._skus[0]},e.prototype.contains=function(e){for(var t=0;t<this._skus.length;t++)if(this._skus[t].code===e.code)return!0;return!1},e})();t.CatalogSkuSet=a}),define("modules/clean/payments/skus/constants",["require","exports","modules/core/i18n"],function(e,t,n){"use strict";function r(e){switch(e){case o.YEARLY:return n._("yearly");case o.TWO_YEARS:return n._("2 year plan");case o.THREE_YEARS:return n._("3 year plan");case o.FIVE_YEARS:return n._("5 year plan");case o.TRIAL:return n._("trial");case o.TRIAL_15_DAYS:return n._("15 days trial");case o.YEARLY_WITH_MONTHLY_BILLING:return n._("yearly with monthly billing");default:return n._("monthly")}}function a(e){switch(e){case i.MONTHLY:return o.MONTHLY;case i.YEARLY:return o.YEARLY;case i.TWO_YEARS:return o.TWO_YEARS;case i.THREE_YEARS:return o.THREE_YEARS;case i.FIVE_YEARS:return o.FIVE_YEARS;case i.TRIAL:return o.TRIAL;case i.TRIAL_15_DAYS:return o.TRIAL_15_DAYS;case i.YEARLY_WITH_MONTHLY_BILLING:return o.YEARLY_WITH_MONTHLY_BILLING}throw"Invalid schedule ID"}Object.defineProperty(t,"__esModule",{value:!0});var i;(function(e){e[e.MONTHLY=1]="MONTHLY",e[e.YEARLY=2]="YEARLY",e[e.TWO_YEARS=21]="TWO_YEARS",e[e.THREE_YEARS=22]="THREE_YEARS",e[e.FIVE_YEARS=23]="FIVE_YEARS",e[e.TRIAL=1e5]="TRIAL",e[e.TRIAL_15_DAYS=11]="TRIAL_15_DAYS",e[e.YEARLY_WITH_MONTHLY_BILLING=24]="YEARLY_WITH_MONTHLY_BILLING"})(i=t.ScheduleId||(t.ScheduleId={})),t.TRIAL_LENGTH_DEFAULT=30;var o;(function(e){e[e.MONTHLY="1M"]="MONTHLY",e[e.YEARLY="1Y"]="YEARLY",e[e.TWO_YEARS="2Y"]="TWO_YEARS",e[e.THREE_YEARS="3Y"]="THREE_YEARS",e[e.FIVE_YEARS="5Y"]="FIVE_YEARS",e[e.TRIAL="U"]="TRIAL",e[e.TRIAL_15_DAYS="NR15D"]="TRIAL_15_DAYS",e[e.YEARLY_WITH_MONTHLY_BILLING="AC1M"]="YEARLY_WITH_MONTHLY_BILLING",e[e.UNLIMITED="U"]="UNLIMITED"})(o=t.ProductSchedule||(t.ProductSchedule={})),t.productScheduleToProductScheduleDescription=r,t.scheduleIdToProductSchedule=a;(function(e){e[e.PRO=1]="PRO",e[e.TEAM=2]="TEAM",e[e.ENTERPRISE=3]="ENTERPRISE",e[e.EDUCATION=4]="EDUCATION"})(t.ProductFamily||(t.ProductFamily={}));(function(e){e[e.PLAN=1]="PLAN",e[e.ADDON=2]="ADDON",e[e.LICENSE=3]="LICENSE",e[e.SERVICE=4]="SERVICE"})(t.ProductClass||(t.ProductClass={}));(function(e){e[e.FREE=1]="FREE",e[e.TRIAL=2]="TRIAL",e[e.MOBILE=3]="MOBILE",e[e.BASIC_PLUS=4]="BASIC_PLUS",e[e.STANDARD=5]="STANDARD",e[e.PREMIUM=6]="PREMIUM",e[e.LEGACY=7]="LEGACY",e[e.BASIC=8]="BASIC",e[e.NEW_STANDARD=9]="NEW_STANDARD",e[e.ADVANCED=10]="ADVANCED",e[e.STANDARD_TRIAL=11]="STANDARD_TRIAL",e[e.ADVANCED_TRIAL=12]="ADVANCED_TRIAL",e[e.STARTER=13]="STARTER",e[e.SERVER=14]="SERVER",e[e.SERVER_TRIAL=15]="SERVER_TRIAL"})(t.ProductPlanType||(t.ProductPlanType={}));(function(e){e[e.LICENSE=101]="LICENSE",e[e.EVH=102]="EVH",e[e.EVH_FREE=103]="EVH_FREE",e[e.QUOTA=104]="QUOTA",e[e.CAPTURE=105]="CAPTURE",e[e.SUPPORT=106]="SUPPORT",e[e.EVH_FREE_THREE_MONTHS=107]="EVH_FREE_THREE_MONTHS",e[e.INFINITE=108]="INFINITE",e[e.PREMIUM_SHARING=109]="PREMIUM_SHARING",e[e.TEAM_FOLDERS=110]="TEAM_FOLDERS",e[e.GROUPS_STANDARD=111]="GROUPS_STANDARD",e[e.GROUPS_ADVANCED=112]="GROUPS_ADVANCED",e[e.GROUPS_ENTERPRISE=113]="GROUPS_ENTERPRISE"})(t.ProductAddonType||(t.ProductAddonType={}));(function(e){e[e.SPACE_PACK_100G="100G"]="SPACE_PACK_100G",e[e.SPACE_PACK_10T="10T"]="SPACE_PACK_10T",e[e.SPACE_PACK_50T="50T"]="SPACE_PACK_50T",e[e.SPACE_PACK_200T="200T"]="SPACE_PACK_200T",e[e.SPACE_PACK_500T="500T"]="SPACE_PACK_500T",e[e.SPACE_PACK_1000T="1000T"]="SPACE_PACK_1000T",e[e.SPACE_PACK_5000T="5000T"]="SPACE_PACK_5000T"})(t.ProductSpec||(t.ProductSpec={}));(function(e){e[e.EVH=1]="EVH",e[e.EVH_FREE=2]="EVH_FREE",e[e.QUOTA=3]="QUOTA",e[e.LICENSE=4]="LICENSE",e[e.SUPPORT=5]="SUPPORT",e[e.CAPTURE=6]="CAPTURE",e[e.INFINITE=7]="INFINITE",e[e.PREMIUM_SHARING=8]="PREMIUM_SHARING",e[e.TEAM_FOLDERS=9]="TEAM_FOLDERS",e[e.GROUPS=10]="GROUPS",e[e.QUOTA_FREE=11]="QUOTA_FREE"})(t.OfferKind||(t.OfferKind={}));(function(e){e[e.TRIAL_CONVERT=1]="TRIAL_CONVERT"})(t.TransitionKind||(t.TransitionKind={}))}),define("modules/clean/payments/skus/quota_info",["require","exports","modules/clean/display_format"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){}return e.deserialize=function(t){var n=new e;return n.serializedQuotaInfo=t,n},Object.defineProperty(e.prototype,"extrasQuota",{get:function(){return this.serializedQuotaInfo.extrasQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedExtrasQuota",{get:function(){return n.format_bytes(this.extrasQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"licensesQuota",{get:function(){return this.serializedQuotaInfo.licensesQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedLicenseQuota",{get:function(){return n.format_bytes(this.licensesQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planQuota",{get:function(){return this.serializedQuotaInfo.planQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedPlanQuota",{get:function(){return n.format_bytes(this.planQuota)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalQuota",{get:function(){return this.serializedQuotaInfo.totalQuota},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedTotalQuota",{get:function(){return n.format_bytes(this.totalQuota)},enumerable:!0,configurable:!0}),e})();t.QuotaInfo=r}),define("modules/clean/payments/skus/subscription_sku_set",["require","exports","modules/clean/payments/skus/billing_schedule","modules/clean/payments/skus/catalog_sku","modules/clean/payments/skus/catalog_sku_set"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(){this.licenseSkuSet=new a.CatalogSkuSet([]),this.addonSkuSet=new a.CatalogSkuSet([]),this.quantityMap={}}return e.deserialize=function(t){return(new e).deserialize(t)},e.prototype.deserialize=function(e){var t=this;if(e.billingSchedule&&(this.schedule=n.BillingSchedule.deserialize(e.billingSchedule)),e.planSku&&(this.planSku=new r.CatalogSku(e.planSku)),e.licenseSkus){var i=e.licenseSkus.map(function(e){var n=new r.CatalogSku(e.sku);return t.quantityMap[n.code]=e.quantity,n});this.licenseSkuSet=new a.CatalogSkuSet(i)}else this.licenseSkuSet=new a.CatalogSkuSet([]);if(e.addonSkus){var o=e.addonSkus.map(function(e){var n=new r.CatalogSku(e.sku);return t.quantityMap[n.code]=e.quantity,n});this.addonSkuSet=new a.CatalogSkuSet(o)}else this.addonSkuSet=new a.CatalogSkuSet([]);return this},e.prototype.fromSubscriptionSkuSet=function(e){this.schedule=e.schedule,this.planSku=e.plan,this.licenseSkuSet=new a.CatalogSkuSet(e.licenses.skus),this.addonSkuSet=new a.CatalogSkuSet(e.addons.skus);for(var t in e.quantityMap)this.quantityMap[t]=e.quantityMap[t];return this},Object.defineProperty(e.prototype,"allSkus",{get:function(){var e=this.licenses.skus.concat(this.addons.skus);return this.planSku&&e.push(this.planSku),new a.CatalogSkuSet(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plan",{get:function(){return this.planSku},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billingSchedule",{get:function(){return this.schedule},enumerable:!0,configurable:!0}),e.prototype.quantityForSku=function(e){var t=this.quantityMap[e.code];return void 0!==t?t:-1},Object.defineProperty(e.prototype,"licenses",{get:function(){return this.licenseSkuSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalLicenses",{get:function(){var e=this;return this.licenseSkuSet.skus.map(function(t){return e.quantityMap[t.code]}).reduce(function(e,t){return e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addons",{get:function(){return this.addonSkuSet},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){var t=this,n=e.allSkus.skus,r=this.allSkus.skus;return n.length===r.length&&r.every(function(r){return!!n.some(function(e){return e.code===r.code})&&t.quantityForSku(r)===e.quantityForSku(r)})},e.prototype.toJSON=function(){for(var e={},t=0,n=this.licenseSkuSet.skus;t<n.length;t++){var r=n[t];e[r.code]=this.quantityMap[r.code]}for(var a={},i=0,o=this.addonSkuSet.skus;i<o.length;i++){var r=o[i];a[r.code]=this.quantityMap[r.code]}return{addonSkus:a,billingScheduleId:this.billingSchedule?this.billingSchedule.id:void 0,licenseSkus:e,planSku:this.planSku?this.planSku.code:void 0,trialDuration:this.trialDuration}},e})();t.SubscriptionSkuSet=i}),define("modules/clean/payments/skus/subscription_state",["require","exports","tslib","modules/clean/payments/skus/quota_info","modules/clean/payments/skus/subscription_sku_set"],function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.deserialize=function(e){return(new t).deserialize(e)},t.prototype.deserialize=function(t){return e.prototype.deserialize.call(this,t),this._minLicenseLimitForPlan=t.minLicenseLimitForPlan,this._maxSelfServiceLicenseLimitForPlan=t.maxSelfServiceLicenseLimitForPlan,this._formattedNextBillingDate=t.formattedNextBillingDate,this._isDeactivatedTeam=t.isDeactivatedTeam,t.quotaInfo&&(this.quotaInfo=r.QuotaInfo.deserialize(t.quotaInfo)),this},Object.defineProperty(t.prototype,"minLicenseLimitForPlan",{get:function(){return this._minLicenseLimitForPlan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSelfServiceLicenseLimitForPlan",{get:function(){return this._maxSelfServiceLicenseLimitForPlan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formattedNextBillingDate",{get:function(){return this._formattedNextBillingDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quota",{get:function(){return this.quotaInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDeactivatedTeam",{get:function(){return this._isDeactivatedTeam},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return!!e.prototype.equals.call(this,t)&&this.formattedNextBillingDate===t.formattedNextBillingDate},t})(a.SubscriptionSkuSet);t.SubscriptionState=i}),define("modules/clean/payments/skus/subscription_status",["require","exports","modules/clean/payments/skus/subscription_state","modules/clean/payments/skus/billing_summary"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){}return e.deserialize=function(t){return(new e).deserialize(t)},e.prototype.deserialize=function(e){return this._nextBillingSummary=r.BillingSummary.deserialize(e.nextBillingSummary),this._subState=n.SubscriptionState.deserialize(e.subState),e.scheduledSubState&&(this._scheduledSubState=n.SubscriptionState.deserialize(e.scheduledSubState)),this},Object.defineProperty(e.prototype,"subState",{get:function(){return this._subState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scheduledSubState",{get:function(){return this._scheduledSubState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalSubState",{get:function(){return this.scheduledSubState?this.scheduledSubState:this.subState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOnTrial",{get:function(){return!!this.subState.plan&&this.subState.plan.isTrialPlan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formattedNextBillingDate",{get:function(){return this.subState.formattedNextBillingDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextBillingSummary",{get:function(){return this._nextBillingSummary},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{scheduledSubState:this.scheduledSubState,subState:this.subState}},e})();t.SubscriptionStatus=a}),define("modules/clean/payments/validation",["require","exports"],function(e,t){"use strict";function n(e){return!!s[e]}function r(e,t){return!t.trim().length||!!s[e]&&s[e].regex.test(t)}function a(e){return s[e]?s[e].prefix:""}function i(e){return s[e]?s[e].examples:[]}function o(e){if(e=e.replace(/\s+/g,""),e.length<2)return!1;switch(e.substring(0,2)){case"AT":return/^AT[0-9]{18}$/.test(e);case"BE":return/^BE[0-9]{14}$/.test(e);case"CY":return/^CY[0-9]{10}[0-9a-zA-Z]{16}$/.test(e);case"CZ":return/^CZ[0-9]{22}$/.test(e);case"DE":return/^DE[0-9]{20}$/.test(e);case"EE":return/^EE[0-9]{18}$/.test(e);case"ES":return/^ES[0-9]{22}$/.test(e);case"FI":return/^FI[0-9]{16}$/.test(e);case"FR":return/^FR[0-9]{12}[0-9a-zA-Z]{11}[0-9]{2}$/.test(e);case"GR":return/^GR[0-9]{9}[0-9a-zA-Z]{16}$/.test(e);case"HU":return/^HU[0-9]{26}$/.test(e);case"HR":return/^HR[0-9]{19}$/.test(e);case"IE":return/^IE[0-9]{2}[0-9a-zA-Z]{4}[0-9]{14}$/.test(e);case"IT":return/^IT[0-9]{2}[A-Z]{1}[0-9]{10}[0-9a-zA-Z]{12}$/.test(e);case"LU":return/^LU[0-9]{5}[0-9a-zA-Z]{13}$/.test(e);case"NL":return/^NL[0-9]{2}[A-Z]{4}[0-9]{10}$/.test(e);case"PL":return/^PL[0-9]{26}$/.test(e);case"PT":return/^PT[0-9]{23}$/.test(e);case"SE":return/^SE[0-9]{22}$/.test(e)}return!1}Object.defineProperty(t,"__esModule",{value:!0});var s={AT:{prefix:"AT",regex:/^ATU[0-9]{8}$/,examples:["ATU12345678"]},BE:{prefix:"BE",regex:/^BE(0?|1)[0-9]{9}$/,examples:["BE0123456789","BE1123456789","BE1234567890"]},BG:{prefix:"BG",regex:/^BG[0-9]{9,10}$/,examples:["BG123456789","BG1234567890"]},CH:{prefix:"CH",regex:/^CHE[0-9]{9}(TVA|MWST|IVA)$/,examples:["CHE123456789TVA","CHE123456789MWST","CHE123456789IVA"]},CY:{prefix:"CY",regex:/^CY[0-9]{8}[A-Z]$/,examples:["CY12345678X"]},CZ:{prefix:"CZ",regex:/^CZ[0-9]{8,10}$/,examples:["CZ12345678","CZ123456789","CZ1234567890"]},DE:{prefix:"DE",regex:/^DE[0-9]{9}$/,examples:["DE123456789"]},DK:{prefix:"DK",regex:/^DK[0-9]{8}$/,examples:["DK12345678"]},EE:{prefix:"EE",regex:/^EE[0-9]{9}$/,examples:["EE123456789"]},GR:{prefix:"EL",regex:/^EL[0-9]{9}$/,examples:["EL123456789"]},ES:{prefix:"ES",regex:/^ES([A-Z][0-9]{7}[0-9A-Z]|[0-9A-Z][0-9]{7}[A-Z])$/,examples:["ESX12345678","ES12345678X","ESX1234567X"]},FI:{prefix:"FI",
regex:/^FI[0-9]{8}$/,examples:["FI12345678"]},FR:{prefix:"FR",regex:/^FR[0-9A-Z]{2}[0-9]{9}$/,examples:["FR12345678901","FRX1234567890","FR1X123456789","FRXX123456789"]},GB:{prefix:"GB",regex:/^GB([0-9]{9}|[0-9]{12}|GD[0-9]{3}|HA[0-9]{3})$/,examples:["GB123456789","GB123456789012","GBGD123","GBHA123"]},HR:{prefix:"HR",regex:/^HR[0-9]{11}$/,examples:["HR12345678901"]},HU:{prefix:"HU",regex:/^HU[0-9]{8}$/,examples:["HU12345678"]},IE:{prefix:"IE",regex:/^IE([0-9][0-9A-Z+*][0-9]{5}[A-Z]{1,2}|[0-9]{7}WI)$/,examples:["IE1X23456X","IE1X23456X","IE1234567XX"]},IT:{prefix:"IT",regex:/^IT[0-9]{11}$/,examples:["IT12345678901"]},LT:{prefix:"LT",regex:/^LT([0-9]{9}|[0-9]{12})$/,examples:["LT123456789","LT123456789012"]},LU:{prefix:"LU",regex:/^LU[0-9]{8}$/,examples:["LU12345678"]},LV:{prefix:"LV",regex:/^LV[0-9]{11}$/,examples:["LV12345678901"]},MT:{prefix:"MT",regex:/^MT[0-9]{8}$/,examples:["MT12345678"]},NL:{prefix:"NL",regex:/^NL[0-9]{9}B[0-9]{2}$/,examples:["NL123456789B01"]},NO:{prefix:"NO",regex:/^NO[0-9]{9}(MVA)?$/,examples:["NO123456789","NO123456789MVA"]},PL:{prefix:"PL",regex:/^PL[0-9]{10}$/,examples:["PL1234567890"]},PT:{prefix:"PT",regex:/^PT[0-9]{9}$/,examples:["PT123456789"]},RO:{prefix:"RO",regex:/^RO[0-9]{2,10}$/,examples:["RO12","RO1234567890"]},SE:{prefix:"SE",regex:/^SE[0-9]{12}$/,examples:["SE123456789012"]},SI:{prefix:"SI",regex:/^SI[0-9]{8}$/,examples:["SI12345678"]},SK:{prefix:"SK",regex:/^SK[0-9]{10}$/,examples:["SK1234567890"]}};t.hasVat=n,t.validateVat=r,t.getVatPrefix=a,t.getVatExamples=i,t.validIBANForCountry=o}),define("modules/clean/react/arbor/elements/arbor_inputs",["require","exports","tslib","external/react","external/classnames","modules/clean/react/css"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=a({input__label:!0,"input__label--before":Boolean(this.props.labelBeforeElement)},this.props.className),t=a({"input__label-container":!0},this.props.containerClassName),n=a({"input__label-input-map":!0,"input__label-input-map--stack":Boolean(this.props.labelBeforeElement)}),i=a({"input__label--error":!0}),o=r.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),s=null;this.props.labelBeforeElement&&(s=o,o=null);var c=null;return this.props.errorText&&this.props.showError&&(c=r.createElement("label",{className:i,htmlFor:this.props.htmlFor},this.props.errorText)),r.createElement("div",{className:t},r.createElement("div",{className:n},s,this.props.children,o),c)},t})(r.Component);t.ArborLabeledInput=o;var s=(function(e){function t(){var t=e.call(this)||this;return t.handleOnChange=t.handleOnChange.bind(t),t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({isValid:this.props.isValid,value:this.props.value})},t.prototype.componentWillReceiveProps=function(e){this.props.isValid!==e.isValid&&this.setState({isValid:e.isValid})},t.prototype.handleOnChange=function(e){var t=e.target;if(this.props.validateHandler){var n=this.props.validateHandler(e,t.value);n||e.preventDefault(),this.setState({isValid:n})}this.setState({value:t.value}),this.props.onChange&&this.props.onChange(e,t.name,t.value)},t.prototype.renderInput=function(){var e=this.props,t=e.name,n=e.id,i=e.disabled,o=e.placeholderText,s=e.pattern,c=this.props.type||"text",l=a({input__text:!0,"input__text--error":this.state.isValid===!1,"input__text--valid":this.state.isValid===!0},this.props.className);return r.createElement("input",{className:l,type:c,name:t,id:n,value:this.state.value,pattern:s,placeholder:o,disabled:i,onChange:this.handleOnChange})},t.prototype.render=function(){var e=this.props,t=e.name,n=e.labelText,a=e.errorText,i=e.labelClassName,s=e.containerClassName;return r.createElement(o,{className:i,containerClassName:s,labelText:n,htmlFor:t,showError:this.state.isValid===!1,errorText:a,labelBeforeElement:!0},this.renderInput())},t})(r.Component);t.ArborTextInputElement=s,t.ArborTextInput=i(s,["/static/css/arbor/elements/inputs-vflrhS8db.css"]);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.renderInput=function(){var e=this.props,t=e.name,n=e.id,i=e.disabled,o=e.value,s=e.placeholderText,c=a({input__text:!0,"input__text--error":this.state.isValid===!1,"input__text--valid":this.state.isValid===!0},this.props.className);return r.createElement("textarea",{className:c,name:t,id:n,value:o,placeholder:s,disabled:i,onChange:this.handleOnChange})},t})(s);t.ArborTextAreaElement=c,t.ArborTextArea=i(c,["/static/css/arbor/elements/inputs-vflrhS8db.css"]);var l=(function(e){function t(){var t=e.call(this)||this;return t.handleCheckboxClick=t.handleCheckboxClick.bind(t),t}return n.__extends(t,e),t.prototype.handleCheckboxClick=function(e){if(this.props.disabled)return void e.stopPropagation();this.props.onClick&&this.props.onClick(e,this.props.name,this.props.checked)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.disabled,i=e.required,s=e.checked,c=e.onChange,l=e.errorText,u=e.labelText,d=a({input__checkbox:!0,"input__checkbox--valid":s,"input__checkbox--disabled":Boolean(n)},this.props.className),p=a(this.props.labelClassName);return r.createElement(o,{className:p,labelText:u,htmlFor:t,showError:i&&!s,errorText:l},r.createElement("div",{className:d,onClick:this.handleCheckboxClick,tabIndex:0}),r.createElement("input",{ref:"checkbox",type:"checkbox","aria-checked":s,name:t,id:t,checked:s,onChange:c,disabled:n}))},t})(r.Component);t.ArborCheckboxInputElement=l,t.ArborCheckboxInput=i(l,["/static/css/arbor/elements/inputs-vflrhS8db.css"]);var u=(function(e){function t(){var t=e.call(this)||this;return t.handleRadioClick=t.handleRadioClick.bind(t),t}return n.__extends(t,e),t.prototype.handleRadioClick=function(e){if(this.props.disabled)return void e.stopPropagation();this.props.onClick&&this.props.onClick(e,this.props.name,this.props.value)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.disabled,i=e.required,s=e.value,c=e.checked,l=e.onChange,u=e.errorText,d=e.labelText,p=a({input__radio:!0,"input__radio--valid":Boolean(c),"input__radio--disabled":Boolean(n)},this.props.className),m=a(this.props.labelClassName);return r.createElement(o,{className:m,labelText:d,htmlFor:t,showError:i&&!s,errorText:u,containerClassName:"input__label-container--row"},r.createElement("div",{"aria-label":t,tabIndex:0,className:p,onClick:this.handleRadioClick}),r.createElement("input",{ref:"radio",type:"radio",name:t,id:t,value:s,checked:c,onChange:l,disabled:n}))},t})(r.Component);t.ArborRadioInputElement=u,t.ArborRadioInput=i(u,["/static/css/arbor/elements/inputs-vflrhS8db.css"]);var d=(function(e){function t(){var t=e.call(this)||this;return t.handleSelectChange=t.handleSelectChange.bind(t),t}return n.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({isValid:this.props.isValid})},t.prototype.componentWillReceiveProps=function(e){this.props.isValid!==e.isValid&&this.setState({isValid:e.isValid})},t.prototype.handleSelectChange=function(e){if(this.props.disabled)return void e.stopPropagation();var t=e.target;if(this.props.validateHandler){var n=this.props.validateHandler(e,t.value);n||e.preventDefault(),this.setState({isValid:n})}if(this.props.onChange){var r=e.currentTarget;this.props.onChange(e,this.props.name,r.value)}},t.prototype.render=function(){var e=this.props,t=e.name,n=e.labelClassName,i=e.className,s=e.labelText,c=e.disabled,l=e.errorText,u=a({input__select:!0},i);return r.createElement(o,{className:n,errorText:l,htmlFor:t,labelBeforeElement:!0,labelText:s,showError:this.state.isValid===!1},r.createElement("select",{className:u,id:t,name:t,disabled:c,onChange:this.handleSelectChange,value:this.props.value},this.props.children))},t})(r.Component);t.ArborSelectInputElement=d,t.ArborSelectInput=i(d,["/static/css/arbor/elements/inputs-vflrhS8db.css"])}),define("modules/clean/teams/admin/lib/billing_history",["require","exports","modules/clean/teams/admin/types/billing_history"],function(e,t,n){"use strict";function r(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];if(r<e.length-1){var i=e[r+1];if(a.type===n.BillingRowType.Payment&&i.type===n.BillingRowType.Invoice&&(i.billed===a.paid||i.billed==="("+a.paid+")")&&i.date===a.date){var o={id:r,invoice:i,payment:a};t.push(o),r++;continue}}a.type===n.BillingRowType.Payment?t.push({id:r,payment:a}):t.push({id:r,invoice:a})}return t}function a(e,n){void 0===n&&(n=t.SelectedYearTypes.ALL_TIME);var a=r(e),i=(new Date).getFullYear().toString();return n===t.SelectedYearTypes.ALL_TIME||(a=n===t.SelectedYearTypes.YEAR_TO_DATE?a.filter(function(e){return e.payment?e.payment.date.indexOf(i)!==-1:!!e.invoice&&e.invoice.date.indexOf(i)!==-1}):a.filter(function(e){return e.payment?e.payment.date.indexOf(n)!==-1:!!e.invoice&&e.invoice.date.indexOf(n)!==-1})),a=a.filter(function(e){return e.invoice&&null!==e.invoice.description||e.payment&&null!==e.payment.description})}Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedYearTypes={ALL_TIME:"all-time",YEAR_TO_DATE:"year-to-date"},t.getHistoryData=a}),define("modules/clean/teams/admin/types/billing_history",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.Invoice=0]="Invoice",e[e.Payment=1]="Payment",e[e.Legacy=2]="Legacy"})(t.BillingRowType||(t.BillingRowType={}))}),define("modules/clean/teams/admin/widgets/billing_history/billing_history_row",["require","exports","tslib","external/react","modules/core/i18n","modules/clean/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal_loader"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o;(function(e){e[e.invoice=0]="invoice",e[e.receipt=1]="receipt"})(o||(o={}));var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEdit=function(){var e=t.props.row;e.invoice&&i.EditInvoiceAddressModalLoader.showInstance(e.invoice)},t}return n.__extends(t,e),t.prototype.renderCombinedRecords=function(e,t){var n=this.props.showEditInvoiceModal,i=null,o=null;e.voidedOn||t.voidedOn?(i=r.createElement("span",{className:"row-content__price--line-through"},e.billed),o=r.createElement("span",null," (",a._("Voided"),")")):i=r.createElement("span",null,e.billed);var s,c,l;e.link&&(s=r.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},a._("Invoice"))),t.link&&(c=r.createElement("a",{href:t.link,target:"_blank",rel:"noopener noreferrer"},a._("Receipt"))),n&&(l=r.createElement("button",{className:"button-as-link",onClick:this.onEdit},"Edit"));var u=r.createElement("td",{className:"row-content__links"},r.createElement("span",null,s,c,l)),d=r.createElement("div",null,r.createElement("p",{className:"description-line"},r.createElement("span",null,e.description),o));return r.createElement("tr",{className:"row-content"},r.createElement("td",{className:"row-content__date"},e.date),r.createElement("td",{className:"row-content__description"},d),u,r.createElement("td",{className:"row-content__price"},i))},t.prototype.renderSingleRecord=function(e,t){var n=null;e.voidedOn&&(n=r.createElement("span",null," (",a._("Voided"),")"));var i=null;if(e.link){var s=t===o.receipt?a._("Receipt"):a._("Invoice");i=r.createElement("td",{className:"row-content__links"},r.createElement("span",null,r.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer"},s)))}else i=r.createElement("td",{className:"row-content__links"});var c=r.createElement("div",null,r.createElement("p",{className:"description-line"},r.createElement("span",null,e.description),n)),l=t===o.receipt?e.paid:e.billed;return r.createElement("tr",{className:"row-content"},r.createElement("td",{className:"row-content__date"},e.date),r.createElement("td",{className:"row-content__description"},c),i,r.createElement("td",{className:"row-content__price"},l))},t.prototype.render=function(){var e=this.props.row;return e.payment&&e.invoice?this.renderCombinedRecords(e.invoice,e.payment):e.payment?this.renderSingleRecord(e.payment,o.receipt):e.invoice?this.renderSingleRecord(e.invoice,o.invoice):r.createElement("noscript",null)},t})(r.Component);t.BillingHistoryTableRow=s}),define("modules/clean/teams/admin/widgets/billing_history/billing_history_table",["require","exports","tslib","external/react","modules/core/i18n","modules/clean/teams/admin/widgets/billing_history/billing_history_row"],function(e,t,n,r,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.buildFooterIfNecessary=function(){if(null!==this.props.footer)return r.createElement("tfoot",{className:"row-footer"},this.props.footer)},t.prototype.render=function(){var e,t=this.props,n=t.amountLabel,o=t.displayNoTransactionsOnEmptyRecords,s=t.showEditInvoiceModal,c=this.props.billingHistoryRecords,l=n?n:a._("Price");return o&&0===c.length&&(e=r.createElement("tr",null,r.createElement("td",null),r.createElement("td",{className:"row-content__description"},a._("No transactions")),r.createElement("td",null))),r.createElement("div",null,r.createElement("table",{className:"billing-history-table",cellSpacing:"0"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"row-header date-row u-font-meta"},a._("Date")),r.createElement("th",{className:"row-header desc-row u-font-meta",colSpan:2},a._("Description")),r.createElement("th",{className:"row-header price-row u-font-meta"},l))),this.buildFooterIfNecessary(),r.createElement("tbody",null,e,c.map(function(e,t){return r.createElement(i.BillingHistoryTableRow,{row:e,key:e.id,showEditInvoiceModal:s})}))))},t})(r.Component);t.BillingHistoryTable=o}),define("modules/clean/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal_loader",["require","exports","tslib","modules/core/notify","external/react","modules/clean/react/css","modules/clean/react/sprite","modules/core/uri","modules/core/i18n","modules/clean/react/arbor/elements/arbor_inputs","modules/clean/payments/validation","modules/clean/react/modal","modules/clean/static_urls","modules/clean/react/tooltip","modules/clean/analytics","modules/clean/ajax_as_promised"],function(e,t,n,r,a,i,o,s,c,l,u,d,p,m,f,_){"use strict";function h(e){return function(t){return null==t||t.length<=e}}function y(e,t){return a.createElement(m.Tooltip,{position:m.TooltipPosition.RIGHT,tooltip_contents:t},e,a.createElement(o,{group:"teams",name:"info_active",alt:"",className:"info-sprite"}))}Object.defineProperty(t,"__esModule",{value:!0});var b=c._("Country and postal code must match your account’s payment information."),g=c._("To change your tax rate on this invoice, contact support."),v={addressName:c._("Billing name"),address:c._("Billing address"),city:c._("City"),state:c._("State"),zip:y(c._("Postal code"),b),country:y(c._("Country"),b),exclusionId:y(c._("VAT number (optional)"),g)},E=(function(e){function i(){var t=e.call(this)||this;return t.disableds={addressName:!1,address:!1,city:!1,state:!1,zip:!0,country:!0,exclusionId:!1},t.validateHandlers={addressName:h(100),address:h(250),city:h(50),state:h(50),zip:function(){return!0},country:function(){return!0},exclusionId:function(){return!0}},t.errorTexts={addressName:c._("Too long"),address:c._("Too long"),city:c._("Too long"),state:c._("Too long"),zip:"",country:"",exclusionId:""},t.onSave=function(){var e=t.state.formState,n=t.props.invoice;if(e)if(f.TeamsWebActionsLogger.log("edit_billing_address_started",null,null,null,!1),t.setState({submitting:!0}),t.isInputValid()){var r={address_name:e.addressName,address:e.address,city:e.city,state:e.state,exclusion_id:e.exclusionId};n&&(r.invoice_id=s.parse(n.link).getQuery().id.toString()),t.makeEditBillingAddressRequest(r)}else t.setState({submitting:!1,showErrors:!0})},t.onCancel=function(){f.TeamsWebActionsLogger.log("edit_billing_address_cancelled",null,null,null,!1),d.Modal.close()},t.state={submitting:!1,showErrors:!1},t}return n.__extends(i,e),i.showInstance=function(e){var n=a.createElement(t.EditInvoiceAddressModalLoader,{invoice:e});d.Modal.showInstance(n)},i.showUpdateTaxProfileModal=function(){var e=a.createElement(t.EditInvoiceAddressModalLoader,null);d.Modal.showInstance(e)},i.prototype.componentDidMount=function(){var e=void 0;this.props.invoice&&(e=s.parse(this.props.invoice.link).getQuery().id.toString(),this.disableds.exclusionId=!0),this.makeRequest(e)},i.prototype.makeRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,a;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t={invoice_id:e},[4,_.WebRequest({url:"/edit_billing_address_view_model",data:t,dataType:"json"})];case 1:return r=n.sent(),u.hasVat(r.countryCode)&&(this.errorTexts.exclusionId=c._("Please enter a valid VAT number, e.g. %(examples)s.").format({examples:u.getVatExamples(r.countryCode).join(", ")}),this.validateHandlers.exclusionId=function(e){return!e||u.validateVat(r.countryCode,e)}),this.setState({formState:r}),[3,3];case 2:return a=n.sent(),d.Modal.close(),[3,3];case 3:return[2]}})})},i.prototype.render=function(){var e,t=this.state,n=t.formState,r=t.showErrors,i=t.submitting;if(n){var o=null;u.hasVat(n.countryCode)&&(o=this.renderInput("exclusionId","grid__item--1-1")),e=a.createElement("div",{className:".type--arbor grid__container grid__container--p-large  grid--x-bookend"},this.renderInstructions(n.countryCode),this.renderInput("addressName","grid__item--1-1"),this.renderInput("address","grid__item--1-1"),this.renderInput("city","grid__item--1-2"),this.renderInput("state","grid__item--11-24"),this.renderInput("zip","grid__item--7-24"),this.renderInput("country","grid__item--2-3"),o)}else e=a.createElement("div",{className:"loading-spinner"},a.createElement("img",{src:p.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),alt:c._("Loading")}));var s=a.createElement(d.ModalButtons,{className:"oq-modal__buttons"},a.createElement(d.ModalButton,{disabled:!n||i||r&&!this.isInputValid(),importance:"primary",onClick:this.onSave},"Save changes"),a.createElement(d.ModalButton,{className:"cancel-button",importance:"tertiary",onClick:this.onCancel},"Cancel"));return a.createElement(d.Modal,{className:"edit-invoice-modal",autoClose:!1,buttonComponent:s,title:c._("Edit Invoice Details")},a.createElement("div",{className:"dynamic-content"},e))},i.prototype.makeEditBillingAddressRequest=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,_.WebRequest({url:"/edit_billing_address",data:e})];case 1:return n.sent(),f.TeamsWebActionsLogger.log("edit_billing_address_success",null,null,null,!1),r.success(c._("Invoice address updated.")),[3,4];case 2:return t=n.sent(),f.TeamsWebActionsLogger.log("edit_billing_address_edit_failure",null,null,null,!1),[3,4];case 3:return d.Modal.close(),[7];case 4:return[2]}})})},i.prototype.renderInstructions=function(e){var t,n=this.props.invoice;if(n){var r=[c._("You are editing details for the %(date)s invoice.").format({date:n.date})];u.hasVat(e)&&r.push(c._("To add or change a VAT number or request a tax refund, contact support.")),t=r.join(" ")}else t=c._("You are editing details for all future invoices. To edit past invoices,         click “Edit” on the invoice item instead.");return a.createElement("div",{className:"grid__item--1-1"},t)},i.prototype.renderInput=function(e,t){var n=this.state,r=n.formState,i=n.showErrors,o="";return r&&(o=r[e]),a.createElement(l.ArborTextInput,{name:e,containerClassName:t,isValid:i?!!this.validateHandlers[e](o)&&"":"",labelText:v[e],errorText:this.errorTexts[e],value:o,onChange:this.onChangeFactory(e),disabled:this.disableds[e]})},i.prototype.onChangeFactory=function(e){var t=this;return function(n,r,a){var i=t.state.formState;i&&t.setState(function(t){return i[e]=a,t})}},i.prototype.isInputValid=function(){var e=this.state.formState;return!!e&&(this.validateHandlers.addressName(e.addressName)&&this.validateHandlers.address(e.address)&&this.validateHandlers.city(e.city)&&this.validateHandlers.state(e.state)&&this.validateHandlers.exclusionId(e.exclusionId))},i})(a.Component);t.EditInvoiceAddressModalLoader=i(E,["/static/css/teams/admin/widgets/edit_invoice_address_modal/edit_invoice_address_modal-vflqXJEiR.css","/static/css/arbor/arbor-vfl7idweq.css"])});
//# sourceMappingURL=pkg-account_pagelet.min.js-vflFClO1z.map